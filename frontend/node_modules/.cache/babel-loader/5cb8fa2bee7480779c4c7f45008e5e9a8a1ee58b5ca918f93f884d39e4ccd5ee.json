{"ast":null,"code":"import _objectSpread from\"/home/batohack/FOMEKONG/ice-pressing-app/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";// src/components/PaymentForm.js\nimport React,{useState,useEffect}from'react';import{TextField,Button,Container,Box,Typography,Paper,MenuItem,Alert}from'@mui/material';import api from'../services/api';import Sidebar from'./Sidebar';import{useNavigate}from'react-router-dom';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export default function PaymentForm(){const[orders,setOrders]=useState([]);const[form,setForm]=useState({order_id:'',amount:'',method:'Cash'});const[error,setError]=useState('');const navigate=useNavigate();useEffect(()=>{api.get('/orders').then(res=>{const unpaid=res.data.filter(o=>o.status!=='Paid');setOrders(unpaid);}).catch(()=>setError('Failed to load orders'));},[]);const handleChange=e=>{setForm(_objectSpread(_objectSpread({},form),{},{[e.target.name]:e.target.value}));setError('');};const handleSubmit=async()=>{if(!form.order_id||!form.amount){setError('Order and amount are required');return;}try{await api.post('/payments',{order_id:parseInt(form.order_id),amount:parseInt(form.amount),method:form.method});navigate('/payments');}catch(e){setError('Failed to save payment');}};return/*#__PURE__*/_jsxs(Box,{sx:{display:'flex',bgcolor:'#f4f6f8',minHeight:'100vh'},children:[/*#__PURE__*/_jsx(Sidebar,{}),/*#__PURE__*/_jsx(Container,{sx:{mt:4,maxWidth:600},children:/*#__PURE__*/_jsxs(Paper,{elevation:3,sx:{p:4,borderRadius:3},children:[/*#__PURE__*/_jsx(Typography,{variant:\"h5\",sx:{mb:3,fontWeight:600,color:'#1a3e72'},children:\"Record Payment \\u0438\\u0447\\u0435\\u0433\\u043E          \"}),error&&/*#__PURE__*/_jsx(Alert,{severity:\"error\",sx:{mb:2},children:error}),/*#__PURE__*/_jsx(TextField,{select:true,label:\"Order\",name:\"order_id\",value:form.order_id,onChange:handleChange,fullWidth:true,required:true,sx:{mb:2},children:orders.length===0?/*#__PURE__*/_jsx(MenuItem,{disabled:true,children:\"No unpaid orders\"}):orders.map(o=>/*#__PURE__*/_jsxs(MenuItem,{value:o.id,children:[\"#\",o.id,\" \\u2013 \",o.customer_name,\" (\",o.total_cost,\" FCFA)\"]},o.id))}),/*#__PURE__*/_jsx(TextField,{label:\"Amount (FCFA)\",name:\"amount\",type:\"number\",value:form.amount,onChange:handleChange,fullWidth:true,required:true,sx:{mb:2},inputProps:{min:1}}),/*#__PURE__*/_jsxs(TextField,{select:true,label:\"Payment Method\",name:\"method\",value:form.method,onChange:handleChange,fullWidth:true,sx:{mb:3},children:[/*#__PURE__*/_jsx(MenuItem,{value:\"Cash\",children:\"Cash\"}),/*#__PURE__*/_jsx(MenuItem,{value:\"Mobile Money\",children:\"Mobile Money\"}),/*#__PURE__*/_jsx(MenuItem,{value:\"Bank Transfer\",children:\"Bank Transfer\"})]}),/*#__PURE__*/_jsx(Button,{variant:\"contained\",size:\"large\",onClick:handleSubmit,fullWidth:true,children:\"Save Payment\"})]})})]});}","map":{"version":3,"names":["React","useState","useEffect","TextField","Button","Container","Box","Typography","Paper","MenuItem","Alert","api","Sidebar","useNavigate","jsx","_jsx","jsxs","_jsxs","PaymentForm","orders","setOrders","form","setForm","order_id","amount","method","error","setError","navigate","get","then","res","unpaid","data","filter","o","status","catch","handleChange","e","_objectSpread","target","name","value","handleSubmit","post","parseInt","sx","display","bgcolor","minHeight","children","mt","maxWidth","elevation","p","borderRadius","variant","mb","fontWeight","color","severity","select","label","onChange","fullWidth","required","length","disabled","map","id","customer_name","total_cost","type","inputProps","min","size","onClick"],"sources":["/home/batohack/FOMEKONG/ice-pressing-app/frontend/src/components/PaymentForm.js"],"sourcesContent":["// src/components/PaymentForm.js\nimport React, { useState, useEffect } from 'react';\nimport {\n  TextField, Button, Container, Box, Typography, Paper, MenuItem, Alert\n} from '@mui/material';\nimport api from '../services/api';\nimport Sidebar from './Sidebar';\nimport { useNavigate } from 'react-router-dom';\n\nexport default function PaymentForm() {\n  const [orders, setOrders] = useState([]);\n  const [form, setForm] = useState({ order_id: '', amount: '', method: 'Cash' });\n  const [error, setError] = useState('');\n  const navigate = useNavigate();\n\n  useEffect(() => {\n    api.get('/orders').then(res => {\n      const unpaid = res.data.filter(o => o.status !== 'Paid');\n      setOrders(unpaid);\n    }).catch(() => setError('Failed to load orders'));\n  }, []);\n\n  const handleChange = (e) => {\n    setForm({ ...form, [e.target.name]: e.target.value });\n    setError('');\n  };\n\n  const handleSubmit = async () => {\n    if (!form.order_id || !form.amount) {\n      setError('Order and amount are required');\n      return;\n    }\n\n    try {\n      await api.post('/payments', {\n        order_id: parseInt(form.order_id),\n        amount: parseInt(form.amount),\n        method: form.method\n      });\n      navigate('/payments');\n    } catch (e) {\n      setError('Failed to save payment');\n    }\n  };\n\n  return (\n    <Box sx={{ display: 'flex', bgcolor: '#f4f6f8', minHeight: '100vh' }}>\n      <Sidebar />\n      <Container sx={{ mt: 4, maxWidth: 600 }}>\n        <Paper elevation={3} sx={{ p: 4, borderRadius: 3 }}>\n          <Typography variant=\"h5\" sx={{ mb: 3, fontWeight: 600, color: '#1a3e72' }}>\n            Record Payment\n         ичего          </Typography>\n\n          {error && <Alert severity=\"error\" sx={{ mb: 2 }}>{error}</Alert>}\n\n          <TextField\n            select label=\"Order\" name=\"order_id\" value={form.order_id}\n            onChange={handleChange} fullWidth required sx={{ mb: 2 }}\n          >\n            {orders.length === 0 ? (\n              <MenuItem disabled>No unpaid orders</MenuItem>\n            ) : (\n              orders.map(o => (\n                <MenuItem key={o.id} value={o.id}>\n                  #{o.id} – {o.customer_name} ({o.total_cost} FCFA)\n                </MenuItem>\n              ))\n            )}\n          </TextField>\n\n          <TextField\n            label=\"Amount (FCFA)\" name=\"amount\" type=\"number\"\n            value={form.amount} onChange={handleChange} fullWidth required sx={{ mb: 2 }}\n            inputProps={{ min: 1 }}\n          />\n\n          <TextField\n            select label=\"Payment Method\" name=\"method\" value={form.method}\n            onChange={handleChange} fullWidth sx={{ mb: 3 }}\n          >\n            <MenuItem value=\"Cash\">Cash</MenuItem>\n            <MenuItem value=\"Mobile Money\">Mobile Money</MenuItem>\n            <MenuItem value=\"Bank Transfer\">Bank Transfer</MenuItem>\n          </TextField>\n\n          <Button variant=\"contained\" size=\"large\" onClick={handleSubmit} fullWidth>\n            Save Payment\n          </Button>\n        </Paper>\n      </Container>\n    </Box>\n  );\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}