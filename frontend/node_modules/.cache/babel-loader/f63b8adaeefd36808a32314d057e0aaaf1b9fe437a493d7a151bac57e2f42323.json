{"ast":null,"code":"import _objectSpread from\"/home/batohack/FOMEKONG/ice-pressing-app/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";// src/components/CustomerForm.js\nimport React,{useState,useEffect}from'react';import{TextField,Button,Container,Box,Typography,Paper,Alert}from'@mui/material';import api from'../services/api';import Sidebar from'./Sidebar';import{useNavigate,useParams}from'react-router-dom';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export default function CustomerForm(){const{id}=useParams();const isEdit=!!id;const[form,setForm]=useState({name:'',phone:'',address:'',email:''});const[errors,setErrors]=useState({});const navigate=useNavigate();useEffect(()=>{if(isEdit){api.get(\"/customers/\".concat(id)).then(res=>setForm(res.data));}},[id,isEdit]);const validate=()=>{const newErrors={};if(!form.name.trim())newErrors.name='Name is required';if(!form.phone.trim())newErrors.phone='Phone is required';else if(!/^\\d{9,12}$/.test(form.phone.replace(/\\s/g,'')))newErrors.phone='Invalid phone (9–12 digits)';if(form.email&&!/^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/.test(form.email))newErrors.email='Invalid email';setErrors(newErrors);return Object.keys(newErrors).length===0;};const handleChange=e=>{setForm(_objectSpread(_objectSpread({},form),{},{[e.target.name]:e.target.value}));setErrors(_objectSpread(_objectSpread({},errors),{},{[e.target.name]:''}));// Clear error on change\n};const handleSubmit=async()=>{if(!validate())return;try{if(isEdit){await api.put(\"/customers/\".concat(id),form);}else{await api.post('/customers',form);}navigate('/customers');}catch(e){alert('Save failed');}};return/*#__PURE__*/_jsxs(Box,{sx:{display:'flex',bgcolor:'#f4f6f8',minHeight:'100vh'},children:[/*#__PURE__*/_jsx(Sidebar,{}),/*#__PURE__*/_jsx(Container,{sx:{mt:4,maxWidth:600},children:/*#__PURE__*/_jsxs(Paper,{elevation:3,sx:{p:4,borderRadius:3},children:[/*#__PURE__*/_jsx(Typography,{variant:\"h5\",sx:{mb:3,fontWeight:600,color:'#1a3e72'},children:isEdit?'Edit Customer':'Add New Customer'}),Object.values(errors).map((err,i)=>/*#__PURE__*/_jsx(Alert,{severity:\"error\",sx:{mb:2},children:err},i)),/*#__PURE__*/_jsxs(Box,{sx:{display:'flex',flexDirection:'column',gap:2},children:[/*#__PURE__*/_jsx(TextField,{name:\"name\",label:\"Full Name\",value:form.name,onChange:handleChange,error:!!errors.name,helperText:errors.name,required:true,fullWidth:true}),/*#__PURE__*/_jsx(TextField,{name:\"phone\",label:\"Phone\",value:form.phone,onChange:handleChange,error:!!errors.phone,helperText:errors.phone||'e.g. 677889900',required:true,fullWidth:true}),/*#__PURE__*/_jsx(TextField,{name:\"address\",label:\"Address (Yaound\\xE9)\",value:form.address,onChange:handleChange,fullWidth:true}),/*#__PURE__*/_jsx(TextField,{name:\"email\",label:\"Email\",type:\"email\",value:form.email,onChange:handleChange,error:!!errors.email,helperText:errors.email,fullWidth:true}),/*#__PURE__*/_jsxs(Button,{variant:\"contained\",size:\"large\",onClick:handleSubmit,children:[isEdit?'Update':'Create',\" Customer\"]})]})]})})]});}","map":{"version":3,"names":["React","useState","useEffect","TextField","Button","Container","Box","Typography","Paper","Alert","api","Sidebar","useNavigate","useParams","jsx","_jsx","jsxs","_jsxs","CustomerForm","id","isEdit","form","setForm","name","phone","address","email","errors","setErrors","navigate","get","concat","then","res","data","validate","newErrors","trim","test","replace","Object","keys","length","handleChange","e","_objectSpread","target","value","handleSubmit","put","post","alert","sx","display","bgcolor","minHeight","children","mt","maxWidth","elevation","p","borderRadius","variant","mb","fontWeight","color","values","map","err","i","severity","flexDirection","gap","label","onChange","error","helperText","required","fullWidth","type","size","onClick"],"sources":["/home/batohack/FOMEKONG/ice-pressing-app/frontend/src/components/CustomerForm.js"],"sourcesContent":["// src/components/CustomerForm.js\nimport React, { useState, useEffect } from 'react';\nimport {\n  TextField, Button, Container, Box, Typography, Paper, Alert\n} from '@mui/material';\nimport api from '../services/api';\nimport Sidebar from './Sidebar';\nimport { useNavigate, useParams } from 'react-router-dom';\n\nexport default function CustomerForm() {\n  const { id } = useParams();\n  const isEdit = !!id;\n  const [form, setForm] = useState({ name: '', phone: '', address: '', email: '' });\n  const [errors, setErrors] = useState({});\n  const navigate = useNavigate();\n\n  useEffect(() => {\n    if (isEdit) {\n      api.get(`/customers/${id}`).then(res => setForm(res.data));\n    }\n  }, [id, isEdit]);\n\n  const validate = () => {\n    const newErrors = {};\n    if (!form.name.trim()) newErrors.name = 'Name is required';\n    if (!form.phone.trim()) newErrors.phone = 'Phone is required';\n    else if (!/^\\d{9,12}$/.test(form.phone.replace(/\\s/g, ''))) newErrors.phone = 'Invalid phone (9–12 digits)';\n    if (form.email && !/^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/.test(form.email)) newErrors.email = 'Invalid email';\n    setErrors(newErrors);\n    return Object.keys(newErrors).length === 0;\n  };\n\n  const handleChange = (e) => {\n    setForm({ ...form, [e.target.name]: e.target.value });\n    setErrors({ ...errors, [e.target.name]: '' }); // Clear error on change\n  };\n\n  const handleSubmit = async () => {\n    if (!validate()) return;\n\n    try {\n      if (isEdit) {\n        await api.put(`/customers/${id}`, form);\n      } else {\n        await api.post('/customers', form);\n      }\n      navigate('/customers');\n    } catch (e) {\n      alert('Save failed');\n    }\n  };\n\n  return (\n    <Box sx={{ display: 'flex', bgcolor: '#f4f6f8', minHeight: '100vh' }}>\n      <Sidebar />\n      <Container sx={{ mt: 4, maxWidth: 600 }}>\n        <Paper elevation={3} sx={{ p: 4, borderRadius: 3 }}>\n          <Typography variant=\"h5\" sx={{ mb: 3, fontWeight: 600, color: '#1a3e72' }}>\n            {isEdit ? 'Edit Customer' : 'Add New Customer'}\n          </Typography>\n\n          {Object.values(errors).map((err, i) => (\n            <Alert severity=\"error\" key={i} sx={{ mb: 2 }}>{err}</Alert>\n          ))}\n\n          <Box sx={{ display: 'flex', flexDirection: 'column', gap: 2 }}>\n            <TextField\n              name=\"name\" label=\"Full Name\" value={form.name} onChange={handleChange}\n              error={!!errors.name} helperText={errors.name} required fullWidth\n            />\n            <TextField\n              name=\"phone\" label=\"Phone\" value={form.phone} onChange={handleChange}\n              error={!!errors.phone} helperText={errors.phone || 'e.g. 677889900'} required fullWidth\n            />\n            <TextField\n              name=\"address\" label=\"Address (Yaoundé)\" value={form.address} onChange={handleChange}\n              fullWidth\n            />\n            <TextField\n              name=\"email\" label=\"Email\" type=\"email\" value={form.email} onChange={handleChange}\n              error={!!errors.email} helperText={errors.email} fullWidth\n            />\n            <Button variant=\"contained\" size=\"large\" onClick={handleSubmit}>\n              {isEdit ? 'Update' : 'Create'} Customer\n            </Button>\n          </Box>\n        </Paper>\n      </Container>\n    </Box>\n  );\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}